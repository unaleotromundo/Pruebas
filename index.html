<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gymify - Entrenamiento</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .app-container {
            max-width: 420px;
            margin: 0 auto;
            background: #f8fafc;
            min-height: 100vh;
            position: relative;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.2);
        }

        /* Avatar Selection Screen */
        .avatar-selection {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            opacity: 1;
            transition: opacity 0.5s ease;
        }

        .avatar-selection.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .avatar-selection h1 {
            color: white;
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .avatar-selection p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.1rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .avatar-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
            width: 100%;
            max-width: 300px;
        }

        .avatar-option {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 3px solid transparent;
            border-radius: 20px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 2rem;
        }

        .avatar-option:hover {
            transform: scale(1.1);
            background: rgba(255, 255, 255, 0.3);
        }

        .avatar-option.selected {
            border-color: #fbbf24;
            background: rgba(251, 191, 36, 0.3);
            transform: scale(1.1);
        }

        .name-input {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            padding: 1rem 1.5rem;
            color: white;
            font-size: 1.1rem;
            margin-bottom: 2rem;
            width: 100%;
            max-width: 300px;
            text-align: center;
        }

        .name-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .start-btn {
            background: linear-gradient(135deg, #fbbf24 0%, #f97316 100%);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 1rem 2rem;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(251, 191, 36, 0.4);
        }

        .start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(251, 191, 36, 0.6);
        }

        .start-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Header mejorado */
        .header {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            padding: 2rem 1.5rem;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.1"/><circle cx="10" cy="60" r="0.5" fill="white" opacity="0.1"/><circle cx="90" cy="40" r="0.5" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
        }

        .header-content {
            position: relative;
            z-index: 10;
            text-align: center;
        }

        .header h1 {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #fbbf24, #f97316);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
            font-weight: 500;
        }

        /* Content */
        .content {
            padding: 1.5rem;
            padding-bottom: 6rem;
            background: #f8fafc;
        }

        .view {
            display: none;
            animation: fadeIn 0.3s ease-in;
        }

        .view.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Hero Card mejorado */
        .hero-card {
            background: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%);
            border-radius: 24px;
            padding: 2rem;
            color: white;
            text-align: center;
            position: relative;
            overflow: hidden;
            margin-bottom: 1.5rem;
            box-shadow: 0 20px 40px rgba(139, 92, 246, 0.3);
        }

        .hero-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.2) 0%, rgba(236, 72, 153, 0.2) 100%);
            border-radius: 24px;
        }

        .hero-content {
            position: relative;
            z-index: 10;
        }

        .avatar {
            font-size: 5rem;
            margin-bottom: 1rem;
            animation: bounce 2s infinite;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .avatar:hover {
            transform: scale(1.1);
        }

        @keyframes bounce {
            0%, 20%, 53%, 80%, 100% {
                animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
                transform: translate3d(0, 0, 0);
            }
            40%, 43% {
                animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);
                transform: translate3d(0, -15px, 0);
            }
            70% {
                animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);
                transform: translate3d(0, -7px, 0);
            }
            90% {
                transform: translate3d(0, -2px, 0);
            }
        }

        /* XP Bar mejorada */
        .xp-bar {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 20px;
            height: 12px;
            margin-bottom: 0.5rem;
            overflow: hidden;
            position: relative;
        }

        .xp-fill {
            background: linear-gradient(135deg, #fbbf24 0%, #f97316 100%);
            height: 100%;
            transition: width 1s ease-in-out;
            width: 0%;
            position: relative;
        }

        .xp-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Stats Grid mejorado */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .stat-card {
            background: white;
            border-radius: 20px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(139, 92, 246, 0.1);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }

        .stat-icon {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .stat-number {
            font-size: 1.75rem;
            font-weight: 800;
            color: #1e293b;
            margin-bottom: 0.25rem;
        }

        .stat-label {
            font-size: 0.875rem;
            color: #64748b;
            font-weight: 600;
        }

        /* Workout Cards mejoradas */
        .workouts-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .workout-card {
            background: white;
            border-radius: 20px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .workout-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .workout-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 50px rgba(139, 92, 246, 0.3);
            border-color: #8b5cf6;
        }

        .workout-card:hover::before {
            opacity: 0.05;
        }

        .workout-card .workout-icon {
            font-size: 3rem;
            margin-bottom: 0.75rem;
            position: relative;
            z-index: 10;
        }

        .workout-card h4 {
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 0.5rem;
            position: relative;
            z-index: 10;
        }

        .workout-card p {
            font-size: 0.875rem;
            color: #64748b;
            font-weight: 600;
            position: relative;
            z-index: 10;
        }

        /* Bottom Navigation mejorada */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 420px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.1);
            border-radius: 25px 25px 0 0;
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-around;
            border-top: 1px solid rgba(139, 92, 246, 0.1);
        }

        .nav-btn {
            background: none;
            border: none;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
            padding: 0.75rem;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-btn.active {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
            transform: scale(1.1);
        }

        .nav-btn:not(.active) {
            color: #64748b;
        }

        .nav-btn:hover:not(.active) {
            color: #6366f1;
            transform: translateY(-2px);
        }

        .nav-icon {
            font-size: 1.5rem;
        }

        .nav-label {
            font-size: 0.75rem;
            font-weight: 600;
        }

        /* Modal mejorado */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .modal.active {
            display: flex;
            animation: modalFadeIn 0.3s ease;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: white;
            border-radius: 24px;
            padding: 2rem;
            width: 100%;
            max-width: 320px;
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.3);
            animation: modalSlideUp 0.3s ease;
        }

        @keyframes modalSlideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Otros estilos existentes adaptados */
        .section {
            margin-bottom: 2rem;
        }

        .section h3 {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 1rem;
        }

        .section-title {
            font-size: 1.75rem;
            font-weight: 800;
            color: #1e293b;
            margin-bottom: 1.5rem;
        }

        /* Leaderboard mejorado */
        .leaderboard-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .leaderboard-item {
            background: white;
            border-radius: 20px;
            padding: 1.5rem;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            display: flex;
            align-items: center;
            gap: 1rem;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .leaderboard-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }

        .leaderboard-item.current-user {
            border-color: #6366f1;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1));
        }

        .rank-badge {
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            width: 40px;
            height: 40px;
            border-radius: 12px;
        }

        .rank-badge.gold { 
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: white;
        }
        .rank-badge.silver { 
            background: linear-gradient(135deg, #e5e7eb, #9ca3af);
            color: white;
        }
        .rank-badge.bronze { 
            background: linear-gradient(135deg, #f97316, #d97706);
            color: white;
        }

        /* Achievements mejorados */
        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .achievement-card {
            border-radius: 20px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .achievement-card.unlocked {
            background: linear-gradient(135deg, #fbbf24 0%, #f97316 100%);
            color: white;
            box-shadow: 0 10px 30px rgba(251, 191, 36, 0.4);
        }

        .achievement-card.locked {
            background: #f1f5f9;
            color: #64748b;
        }

        .achievement-card:hover.unlocked {
            transform: scale(1.05);
            box-shadow: 0 15px 40px rgba(251, 191, 36, 0.6);
        }

        /* Responsive */
        @media (max-width: 480px) {
            .avatar-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 0.75rem;
            }
            
            .workouts-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Animaciones adicionales */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        .pulsing {
            animation: pulse 2s infinite;
        }

        /* Cambiar Avatar Modal */
        .change-avatar-modal .modal-content {
            max-width: 350px;
        }

        .change-avatar-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin: 1rem 0;
        }

        .change-avatar-option {
            background: #f8fafc;
            border: 2px solid transparent;
            border-radius: 15px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 2rem;
        }

        .change-avatar-option:hover {
            background: #e2e8f0;
            transform: scale(1.05);
        }

        .change-avatar-option.selected {
            border-color: #6366f1;
            background: rgba(99, 102, 241, 0.1);
        }

        /* Estilos para elementos adicionales que mantienen la funcionalidad */
        .workout-history {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .empty-state {
            background: #f8fafc;
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            border: 2px dashed #cbd5e1;
        }

        .workout-history-item {
            background: white;
            border-radius: 20px;
            padding: 1.5rem;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .history-xp {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: bold;
        }

        .duration-controls button {
            background: #e2e8f0;
            border: none;
            border-radius: 15px;
            width: 3rem;
            height: 3rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.25rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .duration-controls button:hover {
            background: #cbd5e1;
            transform: scale(1.1);
        }

        .btn-primary {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            border: none;
            border-radius: 20px;
            padding: 1rem 1.5rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(99, 102, 241, 0.6);
        }

        .btn-secondary {
            background: #e2e8f0;
            color: #475569;
            border: none;
            border-radius: 20px;
            padding: 1rem 1.5rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background: #cbd5e1;
        }
    </style>
</head>
<body>
    <!-- Avatar Selection Screen -->
    <div id="avatarSelection" class="avatar-selection">
        <h1>¬°Bienvenido!</h1>
        <p>Elige tu avatar y nombre para comenzar tu aventura fitness</p>
        
        <div class="avatar-grid">
            <div class="avatar-option" data-avatar="üí™">üí™</div>
            <div class="avatar-option" data-avatar="üî•">üî•</div>
            <div class="avatar-option" data-avatar="‚ö°">‚ö°</div>
            <div class="avatar-option" data-avatar="üëë">üëë</div>
            <div class="avatar-option" data-avatar="üöÄ">üöÄ</div>
            <div class="avatar-option" data-avatar="üíé">üíé</div>
            <div class="avatar-option" data-avatar="ü¶Ñ">ü¶Ñ</div>
            <div class="avatar-option" data-avatar="üåü">üåü</div>
        </div>
        
        <input type="text" class="name-input" id="playerName" placeholder="Tu nombre de h√©roe" maxlength="20">
        
        <button class="start-btn" id="startGame" disabled>¬°Comenzar Aventura!</button>
    </div>

    <div id="app" class="app-container">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <h1>HeroFit</h1>
                <p>¬°Gamifica tu entrenamiento!</p>
            </div>
        </div>

        <!-- Main Content -->
        <div class="content" id="content">
            <!-- Home View -->
            <div id="homeView" class="view active">
                <!-- Avatar Principal -->
                <div class="hero-card">
                    <div class="hero-content">
                        <div class="avatar" id="userAvatar" title="Haz click para cambiar avatar">üí™</div>
                        <h2 id="userName">Tu Avatar</h2>
                        <p id="userTitle">Guerrero Novato</p>
                        
                        <!-- Barra de XP -->
                        <div class="xp-bar">
                            <div class="xp-fill" id="xpFill"></div>
                        </div>
                        <p id="xpText">Nivel 1 ‚Ä¢ 0/100 XP</p>
                    </div>
                </div>

                <!-- Estad√≠sticas -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üéØ</div>
                        <p class="stat-number" id="totalWorkouts">0</p>
                        <p class="stat-label">Entrenamientos</p>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚ö°</div>
                        <p class="stat-number" id="userStreak">0</p>
                        <p class="stat-label">D√≠as seguidos</p>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üèÜ</div>
                        <p class="stat-number" id="userRank">#1</p>
                        <p class="stat-label">Posici√≥n</p>
                    </div>
                </div>

                <!-- Entrenamientos Disponibles -->
                <div class="section">
                    <h3>Entrenamientos Disponibles</h3>
                    <div class="workouts-grid" id="workoutsGrid">
                        <!-- Se llenan din√°micamente -->
                    </div>
                </div>
            </div>

            <!-- Leaderboard View -->
            <div id="leaderboardView" class="view">
                <h2 class="section-title">üèÜ Clasificaci√≥n</h2>
                <div id="leaderboardList" class="leaderboard-list">
                    <!-- Se llena din√°micamente -->
                </div>
            </div>

            <!-- Progress View -->
            <div id="progressView" class="view">
                <h2 class="section-title">üìà Tu Progreso</h2>
                
                <!-- Logros -->
                <div class="section">
                    <h3>Logros</h3>
                    <div class="achievements-grid" id="achievementsGrid">
                        <!-- Se llenan din√°micamente -->
                    </div>
                </div>

                <!-- Historial Reciente -->
                <div class="section">
                    <h3>Entrenamientos Recientes</h3>
                    <div id="workoutHistory" class="workout-history">
                        <div class="empty-state">
                            <p>¬°Completa tu primer entrenamiento!</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <button class="nav-btn active" data-view="home">
                <span class="nav-icon">‚≠ê</span>
                <span class="nav-label">Inicio</span>
            </button>
            <button class="nav-btn" data-view="leaderboard">
                <span class="nav-icon">üèÜ</span>
                <span class="nav-label">Ranking</span>
            </button>
            <button class="nav-btn" data-view="progress">
                <span class="nav-icon">üìà</span>
                <span class="nav-label">Progreso</span>
            </button>
        </div>
    </div>

    <!-- Workout Modal -->
    <div id="workoutModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="workout-icon" id="modalIcon">üí™</div>
                <h3 id="modalTitle">Entrenamiento</h3>
            </div>
            
            <div class="duration-selector">
                <label>Duraci√≥n (minutos)</label>
                <div class="duration-controls">
                    <button id="decreaseDuration">-</button>
                    <span id="durationValue">30</span>
                    <button id="increaseDuration">+</button>
                </div>
            </div>

            <div class="xp-preview" id="xpPreview">
                <strong>Ganar√°s: 20 XP</strong>
            </div>
            
            <div class="modal-actions">
                <button id="cancelWorkout" class="btn-secondary">Cancelar</button>
                <button id="completeWorkout" class="btn-primary">¬°Completar!</button>
            </div>
        </div>
    </div>

    <!-- Level Up Modal -->
    <div id="levelUpModal" class="modal">
        <div class="modal-content level-up">
            <div class="level-up-icon">üéâ</div>
            <h2>¬°NIVEL UP!</h2>
            <p id="levelUpText">¬°Ahora eres nivel 2!</p>
            <button id="closeLevelUp" class="btn-primary">¬°Incre√≠ble!</button>
        </div>
    </div>

    <!-- Change Avatar Modal -->
    <div id="changeAvatarModal" class="modal change-avatar-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Cambiar Avatar</h3>
            </div>
            
            <div class="change-avatar-grid">
                <div class="change-avatar-option" data-avatar="üí™">üí™</div>
                <div class="change-avatar-option" data-avatar="üî•">üî•</div>
                <div class="change-avatar-option" data-avatar="‚ö°">‚ö°</div>
                <div class="change-avatar-option" data-avatar="üëë">üëë</div>
                <div class="change-avatar-option" data-avatar="üöÄ">üöÄ</div>
                <div class="change-avatar-option" data-avatar="üíé">üíé</div>
                <div class="change-avatar-option" data-avatar="ü¶Ñ">ü¶Ñ</div>
                <div class="change-avatar-option" data-avatar="üåü">üåü</div>
            </div>
            
            <div class="modal-actions">
                <button id="cancelAvatarChange" class="btn-secondary">Cancelar</button>
                <button id="confirmAvatarChange" class="btn-primary">Confirmar</button>
            </div>
        </div>
    </div>

    <script>
        // Estado global de la aplicaci√≥n
        let appState = {
            currentUser: {
                id: 1,
                name: "Tu Avatar",
                level: 1,
                xp: 0,
                maxXP: 100,
                streak: 3,
                totalWorkouts: 0,
                avatar: "üí™",
                title: "Guerrero Novato"
            },
            workoutLog: [],
            selectedWorkout: null,
            currentView: 'home',
            selectedAvatar: 'üí™'
        };

        // Tipos de entrenamientos disponibles
        const workoutTypes = [
            { id: 1, name: "Cardio", icon: "üèÉ‚Äç‚ôÇÔ∏è", baseXP: 15, color: "bg-red-500" },
            { id: 2, name: "Pesas", icon: "üèãÔ∏è‚Äç‚ôÇÔ∏è", baseXP: 20, color: "bg-blue-500" },
            { id: 3, name: "Yoga", icon: "üßò‚Äç‚ôÄÔ∏è", baseXP: 10, color: "bg-green-500" },
            { id: 4, name: "Nataci√≥n", icon: "üèä‚Äç‚ôÇÔ∏è", baseXP: 25, color: "bg-cyan-500" },
            { id: 5, name: "Ciclismo", icon: "üö¥‚Äç‚ôÇÔ∏è", baseXP: 18, color: "bg-yellow-500" },
            { id: 6, name: "Boxeo", icon: "ü•ä", baseXP: 22, color: "bg-orange-500" }
        ];

        // Avatares disponibles
        const availableAvatars = ["üí™", "üî•", "‚ö°", "üëë", "üöÄ", "üíé", "ü¶Ñ", "üåü"];

        // Leaderboard simulado
        const getLeaderboard = () => [
            { id: 2, name: "Ana Garc√≠a", level: 15, xp: 2450, avatar: "üëë", streak: 21 },
            { id: 3, name: "Carlos L√≥pez", level: 12, xp: 1890, avatar: "‚ö°", streak: 14 },
            { id: 4, name: "Mar√≠a Silva", level: 10, xp: 1456, avatar: "üî•", streak: 8 },
            { id: appState.currentUser.id, name: appState.currentUser.name, level: appState.currentUser.level, xp: appState.currentUser.xp, avatar: appState.currentUser.avatar, streak: appState.currentUser.streak },
            { id: 5, name: "Pedro Ruiz", level: 8, xp: 987, avatar: "üíé", streak: 5 }
        ].sort((a, b) => b.xp - a.xp);

        // Logros disponibles
        const achievements = [
            { id: 1, name: "Primera Victoria", description: "Completa tu primer entrenamiento", icon: "üèÜ" },
            { id: 2, name: "Racha de Fuego", description: "7 d√≠as consecutivos entrenando", icon: "üî•" },
            { id: 3, name: "Centuri√≥n", description: "Alcanza 100 entrenamientos", icon: "‚ö°" },
            { id: 4, name: "Maestro del Gimnasio", description: "Alcanza nivel 10", icon: "üëë" }
        ];

        // Utilidades
        function getTitleByLevel(level) {
            if (level >= 20) return "Leyenda Inmortal";
            if (level >= 15) return "Maestro Supremo";
            if (level >= 10) return "Guerrero Elite";
            if (level >= 5) return "Luchador Veterano";
            return "Guerrero Novato";
        }

        function getProgressPercentage() {
            return appState.currentUser.xp % 100;
        }

        function isAchievementUnlocked(achievement) {
            switch(achievement.id) {
                case 1: return appState.currentUser.totalWorkouts > 0;
                case 2: return appState.currentUser.streak >= 7;
                case 3: return appState.currentUser.totalWorkouts >= 100;
                case 4: return appState.currentUser.level >= 10;
                default: return false;
            }
        }

        // Funciones de renderizado
        function updateHeroCard() {
            document.getElementById('userAvatar').textContent = appState.currentUser.avatar;
            document.getElementById('userName').textContent = appState.currentUser.name;
            document.getElementById('userTitle').textContent = getTitleByLevel(appState.currentUser.level);
            
            const xpFill = document.getElementById('xpFill');
            xpFill.style.width = `${getProgressPercentage()}%`;
            
            document.getElementById('xpText').textContent = 
                `Nivel ${appState.currentUser.level} ‚Ä¢ ${appState.currentUser.xp % 100}/100 XP`;
        }

        function updateStats() {
            document.getElementById('totalWorkouts').textContent = appState.currentUser.totalWorkouts;
            document.getElementById('userStreak').textContent = appState.currentUser.streak;
            
            const leaderboard = getLeaderboard();
            const userRank = leaderboard.findIndex(u => u.id === appState.currentUser.id) + 1;
            document.getElementById('userRank').textContent = `#${userRank}`;
        }

        function renderWorkouts() {
            const container = document.getElementById('workoutsGrid');
            container.innerHTML = '';
            
            workoutTypes.forEach(workout => {
                const card = document.createElement('div');
                card.className = 'workout-card';
                card.innerHTML = `
                    <div class="workout-icon">${workout.icon}</div>
                    <h4>${workout.name}</h4>
                    <p>+${workout.baseXP} XP base</p>
                `;
                card.addEventListener('click', () => openWorkoutModal(workout));
                container.appendChild(card);
            });
        }

        function renderLeaderboard() {
            const container = document.getElementById('leaderboardList');
            container.innerHTML = '';
            
            const leaderboard = getLeaderboard();
            
            leaderboard.forEach((user, index) => {
                const item = document.createElement('div');
                item.className = `leaderboard-item ${user.id === appState.currentUser.id ? 'current-user' : ''}`;
                
                let rankBadge = '';
                if (index === 0) rankBadge = '<div class="rank-badge gold">üëë</div>';
                else if (index === 1) rankBadge = '<div class="rank-badge silver">ü•à</div>';
                else if (index === 2) rankBadge = '<div class="rank-badge bronze">ü•â</div>';
                else rankBadge = `<div class="rank-badge">#${index + 1}</div>`;
                
                item.innerHTML = `
                    ${rankBadge}
                    <div class="leaderboard-avatar">${user.avatar}</div>
                    <div class="leaderboard-info">
                        <h3>${user.name}</h3>
                        <p>Nivel ${user.level} ‚Ä¢ ${user.xp} XP ‚Ä¢ ${user.streak} d√≠as</p>
                    </div>
                    <div class="leaderboard-xp">
                        <div class="xp-value">${user.xp}</div>
                        <div class="xp-label">XP</div>
                    </div>
                `;
                container.appendChild(item);
            });
        }

        function renderAchievements() {
            const container = document.getElementById('achievementsGrid');
            container.innerHTML = '';
            
            achievements.forEach(achievement => {
                const card = document.createElement('div');
                const unlocked = isAchievementUnlocked(achievement);
                card.className = `achievement-card ${unlocked ? 'unlocked' : 'locked'}`;
                
                card.innerHTML = `
                    <div class="achievement-icon">${achievement.icon}</div>
                    <h4>${achievement.name}</h4>
                    <p>${achievement.description}</p>
                `;
                container.appendChild(card);
            });
        }

        function renderWorkoutHistory() {
            const container = document.getElementById('workoutHistory');
            
            if (appState.workoutLog.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <p>¬°Completa tu primer entrenamiento!</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            const recentWorkouts = appState.workoutLog.slice(0, 5);
            
            recentWorkouts.forEach(workout => {
                const item = document.createElement('div');
                item.className = 'workout-history-item';
                
                item.innerHTML = `
                    <div class="history-icon">${workout.icon}</div>
                    <div class="history-info">
                        <h4>${workout.type}</h4>
                        <p>${workout.date} ‚Ä¢ ${workout.duration} min</p>
                    </div>
                    <div class="history-xp">+${workout.xpGained} XP</div>
                `;
                container.appendChild(item);
            });
        }

        // Funciones de setup inicial
        function setupAvatarSelection() {
            const avatarOptions = document.querySelectorAll('.avatar-option');
            const nameInput = document.getElementById('playerName');
            const startBtn = document.getElementById('startGame');
            
            avatarOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // Remover selecci√≥n previa
                    avatarOptions.forEach(opt => opt.classList.remove('selected'));
                    // Seleccionar nueva opci√≥n
                    this.classList.add('selected');
                    appState.selectedAvatar = this.getAttribute('data-avatar');
                    checkStartButton();
                });
            });
            
            nameInput.addEventListener('input', function() {
                checkStartButton();
            });
            
            function checkStartButton() {
                const hasAvatar = appState.selectedAvatar;
                const hasName = nameInput.value.trim().length > 0;
                startBtn.disabled = !(hasAvatar && hasName);
            }
            
            startBtn.addEventListener('click', function() {
                if (!startBtn.disabled) {
                    startGame();
                }
            });
        }

        function startGame() {
            const nameInput = document.getElementById('playerName');
            const avatarSelection = document.getElementById('avatarSelection');
            
            appState.currentUser.name = nameInput.value.trim();
            appState.currentUser.avatar = appState.selectedAvatar;
            
            // Ocultar pantalla de selecci√≥n
            avatarSelection.classList.add('hidden');
            setTimeout(() => {
                avatarSelection.style.display = 'none';
            }, 500);
            
            // Inicializar juego
            updateHeroCard();
            updateStats();
            renderWorkouts();
            
            // Mostrar mensaje de bienvenida personalizado
            setTimeout(() => {
                showNotification(`¬°Bienvenido ${appState.currentUser.name}! Completa tu primer entrenamiento üí™`, 'success');
            }, 1000);
            
            // Guardar estado
            saveAppState();
        }

        // Funciones del modal de entrenamiento
        function openWorkoutModal(workout) {
            appState.selectedWorkout = workout;
            
            document.getElementById('modalIcon').textContent = workout.icon;
            document.getElementById('modalTitle').textContent = workout.name;
            
            // Resetear duraci√≥n a 30
            document.getElementById('durationValue').textContent = '30';
            updateXPPreview();
            
            document.getElementById('workoutModal').classList.add('active');
        }

        function closeWorkoutModal() {
            document.getElementById('workoutModal').classList.remove('active');
            appState.selectedWorkout = null;
        }

        function updateXPPreview() {
            if (!appState.selectedWorkout) return;
            
            const duration = parseInt(document.getElementById('durationValue').textContent);
            const xpGained = Math.floor(appState.selectedWorkout.baseXP * (duration / 30));
            
            document.getElementById('xpPreview').innerHTML = `
                <strong>Ganar√°s: ${xpGained} XP</strong>
            `;
            document.getElementById('xpPreview').style.background = 'linear-gradient(135deg, #d1fae5, #a7f3d0)';
            document.getElementById('xpPreview').style.borderRadius = '15px';
            document.getElementById('xpPreview').style.padding = '1rem';
            document.getElementById('xpPreview').style.textAlign = 'center';
            document.getElementById('xpPreview').style.marginBottom = '1.5rem';
        }

        function completeWorkout() {
            if (!appState.selectedWorkout) return;
            
            const duration = parseInt(document.getElementById('durationValue').textContent);
            const xpGained = Math.floor(appState.selectedWorkout.baseXP * (duration / 30));
            const oldLevel = appState.currentUser.level;
            const newXP = appState.currentUser.xp + xpGained;
            const newLevel = Math.floor(newXP / 100) + 1;
            
            // Crear nuevo registro de entrenamiento
            const newWorkout = {
                id: Date.now(),
                type: appState.selectedWorkout.name,
                icon: appState.selectedWorkout.icon,
                duration: duration,
                xpGained: xpGained,
                date: new Date().toLocaleDateString('es-ES'),
                time: new Date().toLocaleTimeString('es-ES')
            };
            
            // Actualizar estado del usuario
            appState.workoutLog.unshift(newWorkout);
            appState.currentUser.xp = newXP;
            appState.currentUser.level = newLevel;
            appState.currentUser.totalWorkouts += 1;
            appState.currentUser.streak += Math.random() > 0.3 ? 1 : 0;
            appState.currentUser.title = getTitleByLevel(newLevel);
            
            // Cerrar modal
            closeWorkoutModal();
            
            // Actualizar UI
            updateHeroCard();
            updateStats();
            
            // Re-renderizar si estamos en las vistas correspondientes
            if (appState.currentView === 'progress') {
                renderWorkoutHistory();
                renderAchievements();
            }
            if (appState.currentView === 'leaderboard') {
                renderLeaderboard();
            }
            
            // Mostrar level up si corresponde
            if (newLevel > oldLevel) {
                setTimeout(() => showLevelUpModal(newLevel), 500);
                vibrate();
            }
            
            // Mostrar notificaci√≥n
            showNotification(`¬°Ganaste ${xpGained} XP! üéâ`, 'success');
            
            // Guardar en localStorage
            saveAppState();
        }

        function showLevelUpModal(newLevel) {
            document.getElementById('levelUpText').textContent = `¬°Ahora eres nivel ${newLevel}!`;
            document.getElementById('levelUpModal').classList.add('active');
            
            // Estilo para el modal de level up
            const levelUpModal = document.getElementById('levelUpModal');
            const modalContent = levelUpModal.querySelector('.modal-content');
            modalContent.style.textAlign = 'center';
            modalContent.style.background = 'linear-gradient(135deg, #fbbf24, #f59e0b)';
            modalContent.style.color = 'white';
            
            const levelUpIcon = levelUpModal.querySelector('.level-up-icon');
            levelUpIcon.style.fontSize = '4rem';
            levelUpIcon.style.marginBottom = '1rem';
            
            const levelUpTitle = levelUpModal.querySelector('h2');
            levelUpTitle.style.fontSize = '2rem';
            levelUpTitle.style.fontWeight = '800';
            levelUpTitle.style.marginBottom = '1rem';
        }

        function closeLevelUpModal() {
            document.getElementById('levelUpModal').classList.remove('active');
        }

        // Funciones para cambiar avatar
        function openChangeAvatarModal() {
            document.getElementById('changeAvatarModal').classList.add('active');
            
            // Marcar avatar actual como seleccionado
            const options = document.querySelectorAll('.change-avatar-option');
            options.forEach(option => {
                option.classList.remove('selected');
                if (option.getAttribute('data-avatar') === appState.currentUser.avatar) {
                    option.classList.add('selected');
                }
            });
        }

        function closeChangeAvatarModal() {
            document.getElementById('changeAvatarModal').classList.remove('active');
        }

        function confirmAvatarChange() {
            const selected = document.querySelector('.change-avatar-option.selected');
            if (selected) {
                appState.currentUser.avatar = selected.getAttribute('data-avatar');
                updateHeroCard();
                saveAppState();
                closeChangeAvatarModal();
                showNotification('¬°Avatar cambiado! ‚ú®', 'success');
            }
        }

        // Navegaci√≥n entre vistas
        function switchView(viewName) {
            appState.currentView = viewName;
            
            document.querySelectorAll('.view').forEach(view => {
                view.classList.remove('active');
            });
            
            document.getElementById(viewName + 'View').classList.add('active');
            
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-view="${viewName}"]`).classList.add('active');
            
            if (viewName === 'leaderboard') {
                renderLeaderboard();
            } else if (viewName === 'progress') {
                renderAchievements();
                renderWorkoutHistory();
            }
        }

        // Persistencia de datos (simulada)
        function saveAppState() {
            // En una implementaci√≥n real, esto enviar√≠a datos al servidor
            console.log('Estado guardado:', appState);
        }

        function loadAppState() {
            // En una implementaci√≥n real, esto cargar√≠a datos del servidor
            console.log('Estado cargado:', appState);
        }

        // Funciones adicionales para mejorar la experiencia
        function vibrate() {
            if ('vibrate' in navigator) {
                navigator.vibrate([100, 50, 100]);
            }
        }

        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? 'linear-gradient(135deg, #10b981, #059669)' : 'linear-gradient(135deg, #ef4444, #dc2626)'};
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 20px;
                z-index: 9999;
                transform: translateX(100%);
                transition: all 0.3s ease;
                max-width: 300px;
                font-weight: 600;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Setup inicial
            setupAvatarSelection();
            loadAppState();
            
            // Navegaci√≥n entre pesta√±as
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const viewName = this.getAttribute('data-view');
                    switchView(viewName);
                });
            });
            
            // Avatar clickeable para cambiar
            document.getElementById('userAvatar').addEventListener('click', openChangeAvatarModal);
            
            // Modal de cambio de avatar
            document.querySelectorAll('.change-avatar-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.change-avatar-option').forEach(opt => 
                        opt.classList.remove('selected'));
                    this.classList.add('selected');
                });
            });
            
            document.getElementById('cancelAvatarChange').addEventListener('click', closeChangeAvatarModal);
            document.getElementById('confirmAvatarChange').addEventListener('click', confirmAvatarChange);
            
            // Modal de entrenamiento
            document.getElementById('cancelWorkout').addEventListener('click', closeWorkoutModal);
            document.getElementById('completeWorkout').addEventListener('click', completeWorkout);
            
            // Controles de duraci√≥n
            document.getElementById('decreaseDuration').addEventListener('click', function() {
                const current = parseInt(document.getElementById('durationValue').textContent);
                const newValue = Math.max(5, current - 5);
                document.getElementById('durationValue').textContent = newValue;
                updateXPPreview();
            });
            
            document.getElementById('increaseDuration').addEventListener('click', function() {
                const current = parseInt(document.getElementById('durationValue').textContent);
                const newValue = current + 5;
                document.getElementById('durationValue').textContent = newValue;
                updateXPPreview();
            });
            
            // Modal de level up
            document.getElementById('closeLevelUp').addEventListener('click', closeLevelUpModal);
            
            // Cerrar modales al hacer clic fuera
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.classList.remove('active');
                    }
                });
            });
        });

        // Exportar funciones para uso global
        window.HeroFitApp = {
            switchView,
            completeWorkout,
            openWorkoutModal,
            closeWorkoutModal,
            showNotification,
            saveAppState,
            loadAppState,
            openChangeAvatarModal,
            closeChangeAvatarModal
        };
    </script>
</body>
</html>